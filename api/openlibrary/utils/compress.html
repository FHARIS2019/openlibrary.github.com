

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>compress &mdash; openlibrary v2.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="openlibrary v2.0 documentation" href="../../../index.html" />
    <link rel="up" title="utils" href="index.html" />
    <link rel="next" title="dateutil" href="dateutil.html" />
    <link rel="prev" title="bulkimport" href="bulkimport.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dateutil.html" title="dateutil"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bulkimport.html" title="bulkimport"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">openlibrary v2.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >API Documentation</a> &raquo;</li>
          <li><a href="../index.html" >openlibrary</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">utils</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-openlibrary.utils.compress">
<span id="compress"></span><h1>compress<a class="headerlink" href="#module-openlibrary.utils.compress" title="Permalink to this headline">¶</a></h1>
<p>Compressor object for medium-sized, statistically-similar strings.</p>
<p>The idea is that you have a lot of moderate-sized strings (short email
messages or the like) that you would like to compress independently,
for storage in a lookup table where space is at a premium.  They
strings might be a few hundred bytes long on average.  That&#8217;s not
enough to get much compression by gzipping without context.  gzip
works by starting with no knowledge, then building up knowledge (and
improving its compression ratio) as it goes along.</p>
<p>The trick is to &#8220;pre-seed&#8221; the gzip compressor with a bunch of text
(say a few kilobytes of messages concatenated) similar to the ones
that you want to compress separately, and pre-seed the gzip
decompressor with the same initial text.  That lets the compressor and
decompressor both start with enough knowledge to get good compression
even for fairly short strings.  This class puts a compressor and
decompressor into the same object, called a Compressor for convenience.</p>
<p>Usage: running the three lines</p>
<blockquote>
compressor = Compressor(initial_seed)
compressed_record = compressor.compress(some_record)
restored_record = compressor.decompress(compressed_record)</blockquote>
<p>where initial_seed is a few kilobytes of messages, and some_record is
a single record of maybe a few hundred bytes, for typical text, should
result in compressed_record being 50% or less of the size of
some_record, and restored_record being identical to some_record.</p>
<dl class="class">
<dt id="openlibrary.utils.compress.Compressor">
<em class="property">class </em><tt class="descclassname">openlibrary.utils.compress.</tt><tt class="descname">Compressor</tt><big>(</big><em>seed</em><big>)</big><a class="headerlink" href="#openlibrary.utils.compress.Compressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="openlibrary.utils.compress.Compressor.compress">
<tt class="descname">compress</tt><big>(</big><em>text</em><big>)</big><a class="headerlink" href="#openlibrary.utils.compress.Compressor.compress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openlibrary.utils.compress.Compressor.decompress">
<tt class="descname">decompress</tt><big>(</big><em>ctext</em><big>)</big><a class="headerlink" href="#openlibrary.utils.compress.Compressor.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="openlibrary.utils.compress.test">
<tt class="descclassname">openlibrary.utils.compress.</tt><tt class="descname">test</tt><big>(</big><big>)</big><a class="headerlink" href="#openlibrary.utils.compress.test" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo_OL-lg.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="bulkimport.html"
                        title="previous chapter">bulkimport</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dateutil.html"
                        title="next chapter">dateutil</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/api/openlibrary/utils/compress.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dateutil.html" title="dateutil"
             >next</a> |</li>
        <li class="right" >
          <a href="bulkimport.html" title="bulkimport"
             >previous</a> |</li>
        <li><a href="../../../index.html">openlibrary v2.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >API Documentation</a> &raquo;</li>
          <li><a href="../index.html" >openlibrary</a> &raquo;</li>
          <li><a href="index.html" >utils</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2010, Internet Archive.
      Last updated on Dec 31, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
  </body>
</html>